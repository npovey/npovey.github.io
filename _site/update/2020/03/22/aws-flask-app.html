<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Deploying a flask application to Elastic Beanstalk | girls can code</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Deploying a flask application to Elastic Beanstalk" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="COVID 2019 News and Updates" />
<meta property="og:description" content="COVID 2019 News and Updates" />
<link rel="canonical" href="http://localhost:4000/update/2020/03/22/aws-flask-app.html" />
<meta property="og:url" content="http://localhost:4000/update/2020/03/22/aws-flask-app.html" />
<meta property="og:site_name" content="girls can code" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-22T14:34:33-07:00" />
<script type="application/ld+json">
{"headline":"Deploying a flask application to Elastic Beanstalk","description":"COVID 2019 News and Updates","datePublished":"2020-03-22T14:34:33-07:00","dateModified":"2020-03-22T14:34:33-07:00","@type":"BlogPosting","url":"http://localhost:4000/update/2020/03/22/aws-flask-app.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/update/2020/03/22/aws-flask-app.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="girls can code" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">girls can code</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Deploying a flask application to Elastic Beanstalk</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-03-22T14:34:33-07:00" itemprop="datePublished">Mar 22, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h3 id="covid-2019-news-and-updates">COVID 2019 News and Updates</h3>

<p>Youtube links</p>

<p>Website explanation tour <a href="https://youtu.be/vOiLUxaxc8k">https://youtu.be/vOiLUxaxc8k</a></p>

<p>How to deploy the flask application  <a href="https://youtu.be/67obIkAPmNs">https://youtu.be/67obIkAPmNs</a></p>

<p>Ho to upload data from guthub <a href="https://youtu.be/vTPN0FltBKA">https://youtu.be/vTPN0FltBKA</a></p>

<h4 id="1-location-of-the-url-for-our-site">1. Location of the URL for our site</h4>

<p><a href="http://flask-covid19-env.eba-wgnwr7pr.us-west-2.elasticbeanstalk.com/">http://flask-covid19-env.eba-wgnwr7pr.us-west-2.elasticbeanstalk.com/</a></p>

<p><img src="/2020-03-22-aws-flask-app/site.png" alt="Screen Shot 2020-03-13 at 6.12.26 PM" /></p>

<h4 id="login">Login</h4>

<p><img src="/2020-03-22-aws-flask-app/1.png" alt="1" /></p>

<h4 id="notify">Notify</h4>

<p><img src="/2020-03-22-aws-flask-app/2.png" alt="2" /></p>

<h4 id="success">Success</h4>

<p><img src="/2020-03-22-aws-flask-app/3.png" alt="3" /></p>

<h4 id="2utilized-cloud-services">2.Utilized Cloud Services</h4>

<ol>
  <li>Website Hosting: AWS BeanStalk</li>
  <li>AWS PostgreSQL</li>
  <li>AWS DynamoDB</li>
  <li>AWS SNS</li>
  <li>Consumes Restfull API- NewsAPI</li>
  <li>AWS S3</li>
</ol>

<h4 id="3-diagrams-for-project">3. Diagrams for Project</h4>

<p>Flask Application</p>

<p>Flask application was deployed to an AWS Elastic Beanstalk environment. S3 bucket was used as cloud storage. Boto3  for Python was used to create, configure, and manage AWS services, such as EC2 and S3. All code was written on MacOS Linux machine with Atom text editor.</p>

<p>This apllication was developed by using the following tutorial on AWS site.</p>

<p><a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html</a></p>

<p><strong>Figure 1: Flow chart for the front page.</strong></p>

<p><img src="/2020-03-22-aws-flask-app/flowchart.jpg" alt="flowchart" /></p>

<p><strong>Figure 2: High Level Design for the website.</strong></p>

<p><img src="/2020-03-22-aws-flask-app/design2.jpg" alt="design2" /></p>

<p>As we can see from the figure above AWS Elastic BeanStalk offeres the loadbalancer. When trafiic grows to our website the systems automatically will be scaled to support the high demand.</p>

<p>Future work includes to automate the data load form Github to the PostgreSQL table. The idea is the data will be copied to S3 bucket and static url to S3 bucket will be used to upload data into PostgraSQL table. Currently all these done manually.</p>

<h4 id="4-why-i-chose-aws">4. Why I Chose AWS</h4>

<p>I chose AWS because MackbookAir is my primary computer and I use Linux as an OS. I tried to develop a webpage using Visual Studio and Azure but Visual Studio for the Macbook Air didn’t have most features that were described in the tutorials that I tried to follow. Also, when I tried to chose a language to code my first choice was JavaScript but pretty soon I didn’t make any progress due to my javascript experience being limited. I finally decided to use Python as my coding language and AWS as a cloud service provider.</p>

<h4 id="5-how-monitoring-is-done-on-the-site">5. How monitoring is done on the site</h4>

<p>Elastick Beanstalk offers monitoring system to customers</p>

<p><a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environments-health.html">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environments-health.html</a></p>

<p>The document explains that developer can monitor environment health in the AWS management console.</p>

<p>AWS offers moitoring functionality.</p>

<p><img src="/2020-03-22-aws-flask-app/env0.png" alt="env0" /></p>

<p><img src="/2020-03-22-aws-flask-app/env.png" alt="env" /></p>

<p>Click on monitoring</p>

<p>Near the top we can see the stats for the environment. Also, overall environment health is shown in the graphs below.</p>

<p><img src="/2020-03-22-aws-flask-app/monitor.png" alt="monitor" /></p>

<h4 id="6-sla-calculation">6. SLA Calculation</h4>

<ul>
  <li>
    <p>Amazon DynamoDB Service Level Agreement: <strong>99.99%</strong></p>
  </li>
  <li>Amazon Messaging (SQS, SNS) Service Level Agreement: <strong>99.9%</strong></li>
  <li>
    <p>NewsAPI: No uptime SLA as we are using free service. Assumed SLA <strong>99.95%</strong></p>
  </li>
  <li>
    <p>Amazon PostgreSQL Service Level Agreement: <strong>99.95%</strong></p>
  </li>
  <li>
    <p>AWS Elastic BeanStalk: **99.99% **</p>
  </li>
  <li>Amazon S3 Service Level Agreement (“SLA”) : <strong>99.99%</strong></li>
</ul>

<p><strong>Case 1:</strong>  Website</p>

<p>​	[Elastic BeanStalk] 99.99%  * [S3] 99.99% * [PostgreSQL]99.95% = <strong>99.93%</strong></p>

<p><strong>Case 2:</strong> Login and  Create Account Buttons</p>

<p>​	  [DynamoDB] 99.99% * [ Elastic BeanStalk]99.99%  = <strong>99.98%</strong></p>

<p><strong>Case 3:</strong> Notify</p>

<p>​	  [DynamoDB] 99.99% * [ Elastic BeanStalk]99.99% *  [ SNS]99.9%  = <strong>99.88%</strong></p>

<h4 id="7-how-the-site-will-scale-with-load">7. How the site will scale with load</h4>

<p>According to the article in Medium, “Elastic Beanstalk Web servers are provisioned behind a load balancer and handle end-user requests, Elastic Beanstalk provides basic auto-scaling based on metrics collected from the underlying instances. We use Average CPU utilization as a metric for autoscaling.”[1] As load grows AWS will start new instances for us and when the load goes down the service will turn off added instances and downsize according to the new load.</p>

<p>———————————— OTHER USEFUL INFO ——————————————————————————-</p>

<h4 id="sending-an-sms-message">Sending an SMS Message</h4>

<p>AWS offers Simple Notification Services. On the website users will be able to sign up for text notifications</p>

<p><a href="https://docs.aws.amazon.com/sns/latest/dg/sms_publish-to-phone.html">https://docs.aws.amazon.com/sns/latest/dg/sms_publish-to-phone.html</a></p>

<p><img src="/2020-03-22-aws-flask-app/sns.png" alt="sns" /></p>

<h5 id="dependencies">Dependencies</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">APScheduler</span><span class="o">==</span>3.6.3
Flask-SQLAlchemy<span class="o">==</span>2.4.1
<span class="nv">SQLAlchemy</span><span class="o">==</span>1.3.13
<span class="nv">boto3</span><span class="o">==</span>1.12.16
<span class="nv">botocore</span><span class="o">==</span>1.15.16
<span class="nv">certifi</span><span class="o">==</span>2019.11.28
<span class="nv">chardet</span><span class="o">==</span>3.0.4
<span class="nv">Click</span><span class="o">==</span>7.0
<span class="nv">docutils</span><span class="o">==</span>0.15.2
<span class="nv">dominate</span><span class="o">==</span>2.5.1
<span class="nv">Flask</span><span class="o">==</span>1.0.2
Flask-Bootstrap<span class="o">==</span>3.3.7.1
Flask-Login<span class="o">==</span>0.5.0
Flask-WTF<span class="o">==</span>0.14.3
<span class="nv">idna</span><span class="o">==</span>2.9
<span class="nv">itsdangerous</span><span class="o">==</span>1.1.0
<span class="nv">Jinja2</span><span class="o">==</span>2.11.1
<span class="nv">jmespath</span><span class="o">==</span>0.9.5
<span class="nv">MarkupSafe</span><span class="o">==</span>1.1.1
newsapi-python<span class="o">==</span>0.2.6
<span class="nv">numpy</span><span class="o">==</span>1.18.1
<span class="nv">pandas</span><span class="o">==</span>1.0.1
python-dateutil<span class="o">==</span>2.8.1
<span class="nv">pytz</span><span class="o">==</span>2019.3
<span class="nv">requests</span><span class="o">==</span>2.23.0
<span class="nv">s3transfer</span><span class="o">==</span>0.3.3
<span class="nv">six</span><span class="o">==</span>1.14.0
<span class="nv">tzlocal</span><span class="o">==</span>2.0.0
<span class="nv">urllib3</span><span class="o">==</span>1.25.8
<span class="nv">visitor</span><span class="o">==</span>0.1.3
<span class="nv">Werkzeug</span><span class="o">==</span>1.0.0
<span class="nv">WTForms</span><span class="o">==</span>2.2.1
psycopg2-binary<span class="o">==</span>2.8.4
</code></pre></div></div>

<p>Project folder info</p>

<p><img src="/2020-03-22-aws-flask-app/folder.png" alt="Screen Shot 2020-03-12 at 6.12.29 PM" /></p>

<p>Created flask-covid19-env</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>virt<span class="o">)</span> nps-MacBook-Air-2:eb-flask np<span class="nv">$ </span>eb create flask-covid19-env
Creating application version archive <span class="s2">"app-200311_225521"</span><span class="nb">.</span>
Uploading: <span class="o">[</span><span class="c">##################################################] 100% Done...</span>
Environment details <span class="k">for</span>: flask-covid19-env
  Application name: flask-covid19
  Region: us-west-2
  Deployed Version: app-200311_225521
  Environment ID: e-qqejrt2ykz
  Platform: arn:aws:elasticbeanstalk:us-west-2::platform/Python 3.6 running on 64bit Amazon Linux/2.9.6
  Tier: WebServer-Standard-1.0
  CNAME: UNKNOWN
  Updated: 2020-03-12 05:56:51.831000+00:00
Printing Status:
2020-03-12 05:56:50    INFO    createEnvironment is starting.
2020-03-12 05:56:52    INFO    Using elasticbeanstalk-us-west-2-051707507732 as Amazon S3 storage bucket <span class="k">for </span>environment data.
2020-03-12 05:57:13    INFO    Created security group named: sg-0f76c5f0cf73c7d18
2020-03-12 05:57:15    INFO    Created load balancer named: awseb-e-q-AWSEBLoa-GTXGDRPFN6IN
2020-03-12 05:57:30    INFO    Created security group named: awseb-e-qqejrt2ykz-stack-AWSEBSecurityGroup-1GTN12UP63STW
2020-03-12 05:57:30    INFO    Created Auto Scaling launch configuration named: awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingLaunchConfiguration-NNY2X3L9Y4WZ
2020-03-12 05:58:33    INFO    Created Auto Scaling group named: awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingGroup-1GTYLLB04SGKE
2020-03-12 05:58:33    INFO    Waiting <span class="k">for </span>EC2 instances to launch. This may take a few minutes.
2020-03-12 05:58:33    INFO    Created Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:051707507732:scalingPolicy:73afe29f-58d2-4c1c-8e52-3254a47d93d1:autoScalingGroupName/awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingGroup-1GTYLLB04SGKE:policyName/awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingScaleUpPolicy-TB4DYH63FMW2
2020-03-12 05:58:33    INFO    Created Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:051707507732:scalingPolicy:13a5cdf4-1cd1-4273-ac4a-f18fbc0232e1:autoScalingGroupName/awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingGroup-1GTYLLB04SGKE:policyName/awseb-e-qqejrt2ykz-stack-AWSEBAutoScalingScaleDownPolicy-2Z20O5HD17XK
2020-03-12 05:58:33    INFO    Created CloudWatch alarm named: awseb-e-qqejrt2ykz-stack-AWSEBCloudwatchAlarmHigh-N3QVZXBFGZKS
2020-03-12 05:58:33    INFO    Created CloudWatch alarm named: awseb-e-qqejrt2ykz-stack-AWSEBCloudwatchAlarmLow-1UN0WN3JQR6WQ
2020-03-12 05:59:41    INFO    Application available at flask-covid19-env.eba-wgnwr7pr.us-west-2.elasticbeanstalk.com.
2020-03-12 05:59:41    INFO    Successfully launched environment: flask-covid19-env

</code></pre></div></div>

<h4 id="bibliography">Bibliography</h4>

<ol>
  <li>Medium article about autoscaling <a href="https://medium.com/tensult/elastic-beanstalk-with-autoscaling-81791a198095">https://medium.com/tensult/elastic-beanstalk-with-autoscaling-81791a198095</a></li>
  <li>AWS CloudWatch <a href="https://aws.amazon.com/cloudwatch/">https://aws.amazon.com/cloudwatch/</a></li>
</ol>

  </div><a class="u-url" href="/update/2020/03/22/aws-flask-app.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">girls can code</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">girls can code</li><li><a class="u-email" href="mailto:npovey2atgmail">npovey2atgmail</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
